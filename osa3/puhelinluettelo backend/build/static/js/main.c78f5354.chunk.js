(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t(16),u=t.n(a),o=(t(7),t(6)),i=t(3),s=function(e){return Object(c.jsxs)("form",{onSubmit:e.handleHyvaksyminen,children:[Object(c.jsxs)("div",{children:["name:",Object(c.jsx)("input",{type:"text",name:"name",value:e.name,onChange:e.handlePersonChange})]}),Object(c.jsxs)("div",{children:["number:",Object(c.jsx)("input",{type:"text",name:"number",value:e.number,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){return Object(c.jsx)("ul",{children:e.filteri.map((function(n){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[" ",n.name," ",n.number,Object(c.jsx)("button",{onClick:function(){return e.deletePerson(n.id)},children:"poista"})]})},n.name)}))})},d=function(e){return Object(c.jsx)("div",{children:Object(c.jsx)("input",{type:"text",onChange:function(n){return e.setSearch(n.target.value)}})})},j=t(4),b=t.n(j),f="/api/persons",h=function(){return b.a.get(f).then((function(e){return e.data})).catch((function(e){console.log("fail")}))},m=function(e){return b.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return b.a.delete("".concat(f,"/").concat(e))},p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),b=j[0],f=j[1],p=Object(r.useState)(""),v=Object(i.a)(p,2),g=v[0],y=v[1],w=Object(r.useState)(""),C=Object(i.a)(w,2),S=C[0],P=C[1],k=Object(r.useState)(null),N=Object(i.a)(k,2),T=N[0],D=N[1],A=Object(r.useState)(null),E=Object(i.a)(A,2),H=E[0],I=E[1],J=function(e){f(e.target.value)};Object(r.useEffect)((function(){h().then((function(e){a(e)}))}),[]);var L=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),B=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},U=function(e){var n=e.errormes;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(B,{message:T}),Object(c.jsx)(U,{errormes:H}),Object(c.jsx)(d,{setSearch:P}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(s,{addPerson:function(e){e.preventDefault(),m({name:b,number:g}).then((function(e){a(t.concat(e)),f(""),y("")})),D("Added ".concat(b)),setTimeout((function(){D(null)}),5e3)},handlePersonChange:J,handleNumberChange:function(e){y(e.target.value)},handleHyvaksyminen:function(e){var n={name:b,number:g},c=t.filter((function(e){return e.name===n.name}));(e.preventDefault(),c.length>0)?(alert("".concat(b," on jo lis\xe4tty")),window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&function(e){var n=t.find((function(n){return n.name===e})),c=Object(o.a)(Object(o.a)({},n),{},{number:g});O(c.id,c).then((function(c){a(t.map((function(e){return e.id!==n.id?e:c}))),D("Updated ".concat(e)),setTimeout((function(){D(null)}),5e3)})).catch((function(n){I("Information of '".concat(e,"' had already been removed from server")),setTimeout((function(){I(null)}),5e3)}))}(b)):0===c.length&&m(n).then((function(e){a(t.concat(e)),f(""),y(""),D("Added ".concat(b)),setTimeout((function(){D(null)}),5e3)}))},name:b,number:g}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(l,{handlePersonChange:J,filteri:L,deletePerson:function(e){window.confirm("Do you want to delete this person ?")&&(x(e),D("Person removal successful"),setTimeout((function(){D(null)}),5e3))}}),Object(c.jsx)("div",{})]})};u.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))},7:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.c78f5354.chunk.js.map